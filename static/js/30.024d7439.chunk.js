"use strict";(self.webpackChunkproject_mern=self.webpackChunkproject_mern||[]).push([[30],{1030:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var a=n(4165),i=n(5861),o=n(885),s=n(1951),l=n(2901),c=n(2791),r=n(9513),d=n.n(r),x=n(1134),u=n(6871),h=n(5629),m=n(1079),g=n(4249),p=n(9914),f=n(1292),j=n(3453),b=n(8062);var N=n(184),v=function(e){var t=e.tourDetail,n=e.onClick,a=e.booking,i=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(0,c.useState)(e),n=(0,o.Z)(t,2),a=n[0],i=n[1];return(0,c.useEffect)((function(){setTimeout((function(){i(!1)}),500)}),[]),a}();return console.log(i),(0,N.jsx)(c.Fragment,{children:i?(0,N.jsx)(y,{tourDetail:t}):(0,N.jsxs)("div",{className:"flex flex-col",children:[(0,N.jsx)("div",{className:"w-[250px]- h-[250px] rounded-lg",children:null!==t&&void 0!==t&&t.images[0]?(0,N.jsx)("img",{loading:"lazy",src:null===t||void 0===t?void 0:t.images[0],alt:"img-tour",className:"h-full w-full rounded-tl-lg rounded-tr-lg object-cover"}):(0,N.jsx)("img",{loading:"lazy",src:"https://images.unsplash.com/photo-1657662075319-3ced8dee4c10?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80",alt:"img-tour",className:"h-full w-full rounded-tl-lg rounded-tr-lg object-cover"})}),(0,N.jsx)("div",{className:"flex-1 bg-white shadow-[0_0_20px_5px_rgb(0,0,0,0.05)]",children:(0,N.jsxs)("div",{className:"flex h-full flex-col p-4",children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("span",{className:"text-sm text-c4",children:t.startDay}),(0,N.jsx)("p",{onClick:n,className:"mt-1 cursor-pointer text-justify font-semibold text-[#2d4d71] hover:text-[#4d4aef]",children:t.tourName})]}),(0,N.jsxs)("div",{className:"mt-auto flex flex-col",children:[(0,N.jsxs)("p",{className:"my-4",children:["N\u01a1i kh\u1edfi h\xe0nh:"," ",(0,N.jsx)("b",{children:t.beginningLocation.locationName})]}),(0,N.jsx)("span",{className:"text-primary-red",children:(0,N.jsx)("b",{children:t.price.toLocaleString("vi-VN",{style:"currency",currency:"VND"})})}),(0,N.jsxs)(m.Zv,{items:"center",justify:"between",className:"mt-2 font-DMSans",children:[(0,N.jsx)(h.Z,{onClick:a,className:"gap-1 rounded-[4px] bg-[#fd5056] px-4 py-1 text-sm text-white transition-all hover:bg-[#d74449]",icon:(0,N.jsx)(f.k5,{}),children:"Book"}),(0,N.jsx)("button",{type:"button",className:"rounded-[4px] border border-primary-blue py-1 px-4 text-sm  text-primary-blue transition-all hover:bg-primary-blue hover:text-white",children:"View detail"})]})]})]})})]})})},y=function(){return(0,N.jsxs)("div",{className:"flex flex-col",children:[(0,N.jsx)("div",{className:"w-[250px]- skeleton h-[250px] rounded-tl-lg rounded-tr-lg"}),(0,N.jsx)("div",{className:"flex-1 bg-white shadow-[0_0_20px_5px_rgb(0,0,0,0.05)]",children:(0,N.jsxs)("div",{className:"flex h-full flex-col p-4",children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{className:"skeleton h-5 w-[70px]"}),(0,N.jsx)("div",{className:"skeleton mt-2 h-[120px] w-full"})]}),(0,N.jsxs)("div",{className:"mt-auto flex flex-col",children:[(0,N.jsx)("div",{className:"skeleton my-4 h-5 w-[270px]"}),(0,N.jsx)("div",{className:"skeleton my-4 h-5 w-[90px]"}),(0,N.jsxs)(m.Zv,{items:"center",justify:"between",className:"mt-2 font-DMSans",children:[(0,N.jsx)("div",{className:"skeleton h-7 w-28"}),(0,N.jsx)("div",{className:"skeleton h-7 w-28"})]})]})]})})]})},w=(0,c.memo)(v),L=n(2189),D=n(9371),k=n(8446);var Z=[{title:"H\u1ea1 Long"},{title:"Sapa"},{title:"H\xe0 N\u1ed9i"},{title:"\u0110\xe0 N\u1eb5ng"},{title:"Ph\xfa Qu\u1ed1c"},{title:"Nha Trang"},{title:"Quy Nh\u01a1n"},{title:"Y\xean B\xe1i"},{title:"Ph\xfa Y\xean"},{title:"Phan Thi\u1ebft"}],S=function(){var e,t,n=(0,c.useState)(1),r=(0,o.Z)(n,2),v=r[0],y=r[1],S=(0,c.useState)([]),I=(0,o.Z)(S,2),C=I[0],T=I[1],M=(0,c.useState)(1),_=(0,o.Z)(M,2),P=_[0],z=_[1],B=(0,c.useState)(!0),E=(0,o.Z)(B,2),H=(E[0],E[1],(0,u.s0)()),V={beginningLocation:(0,D.Z)("beginningLocation"),destinationLocation:(0,D.Z)("destinationLocation"),startDay:(0,D.Z)("startDay")},q={tourDetail:{beginningLocation:{locationName:(t=V).beginningLocation,locationType:"BEGINNING"},destinationLocation:{locationName:t.destinationLocation,locationType:"DESTINATION"},startDay:t.startDay},type:"TOUR_BASIC"};console.log("TCL: SearchPage -> tour",q);var A=(0,D.Z)("startDay").split("/"),G=(0,x.cI)({defaultValues:{startDay:new Date(+A[2],A[1]-1,+A[0])}}),O=G.handleSubmit,F=G.control,R=G.setValue;(0,c.useEffect)((function(){b.Z.post("/tours/search?pageSize=6",q).then((function(e){T(e.data)})),b.Z.post("/tours/search?pageSize=6",q).then((function(e){z(e.data.totalPages)})),R("beginningLocation",V.beginningLocation),R("destinationLocation",V.destinationLocation)}),[V.destinationLocation]);var Q=function(e){H("?beginningLocation=".concat((0,k.q)(V.beginningLocation),"&destinationLocation=").concat((0,k.q)(e.target.textContent),"&startDay=").concat(V.startDay)),window.scrollTo(0,0)},U=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={tourDetail:{beginningLocation:{locationName:t.beginningLocation,locationType:"BEGINNING"},destinationLocation:{locationName:t.destinationLocation,locationType:"DESTINATION"},startDay:(0,s.default)(t.startDay,"dd/MM/yyyy")},type:"TOUR_BASIC"},b.Z.post("/tours/search?pageSize=6",n).then((function(e){console.log(e),T(e.data),H("?beginningLocation=".concat((0,k.q)(t.beginningLocation),"&destinationLocation=").concat((0,k.q)(t.destinationLocation),"&startDay=").concat((0,s.default)(t.startDay,"dd/MM/yyyy")))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,N.jsxs)("div",{className:"px-5 lg:mx-auto lg:max-w-7xl",children:[(0,N.jsx)("form",{className:"rounded-br-md rounded-bl-md bg-[#0000001a] p-5",onSubmit:O(U),children:(0,N.jsxs)(m.It,{cols:"12",spacing:"4",children:[(0,N.jsx)(m.It,{col:"3",children:(0,N.jsx)(g.Z,{setValue:R,dropdownLabel:V.beginningLocation,bg:"bg-white",icon:(0,N.jsx)(f.xb,{}),control:F,radius:"4",id:"beginning-location",name:"beginningLocation",list:[{type:"H\xe0 N\u1ed9i"},{type:"TP. H\u1ed3 Ch\xed Minh"},{type:"Cao L\xe3nh"}]})}),(0,N.jsx)(m.It,{col:"3",children:(0,N.jsxs)(m.Zv,{items:"center",spacing:"3",radius:"4",className:"bg-white",children:[(0,N.jsx)("span",{className:"pl-4 text-c4",children:(0,N.jsx)(f.jt,{})}),(0,N.jsx)("span",{className:"z-50 text-black",children:(0,N.jsx)(x.Qr,{control:F,name:"startDay",render:function(e){var t=e.field;return(0,N.jsxs)(c.Fragment,{children:[(0,N.jsx)(j.Z,{htmlFor:"start-date",children:"Depart Date"}),(0,N.jsx)(d(),{id:"start-date",dateFormat:"dd/MM/yyyy",onChange:t.onChange,selected:t.value})]})}})})]})}),(0,N.jsx)(m.It,{col:"4",children:(0,N.jsx)(L.n3,{control:F,setValue:R})}),(0,N.jsx)(m.It,{col:"2",children:(0,N.jsx)(h.Z,{background:"blue",radius:"4",className:"text-lg font-semibold text-white",children:"Search"})})]})}),(0,N.jsxs)(m.Zv,{justify:"start",spacing:"10",children:[(0,N.jsx)("div",{children:(0,N.jsxs)("div",{className:"sticky top-0 z-10 mt-10 w-[260px] flex-shrink-0 border border-[#ddd]",children:[(0,N.jsx)("div",{className:"w-full border-b border-b-[#ddd] bg-[#f5f5f5] px-4 py-3 text-center font-semibold",children:"HOT places in the country"}),(0,N.jsx)("ul",{className:"py-4",children:Z.map((function(e){return(0,N.jsx)("li",{className:"cursor-pointer py-2 px-4 transition-all hover:bg-[#40a6f21a] hover:text-[#00c1de]",onClick:Q,children:e.title},e.title)}))})]})}),(0,N.jsxs)("div",{className:"flex-1",children:[(0,N.jsxs)(p.Z,{sx:"xl-4",className:"mt-10 text-center",children:["List of tours from ",V.beginningLocation," to"," ",V.destinationLocation]}),(0,N.jsxs)("div",{className:"mt-6",children:[(0,N.jsxs)("div",{className:"my-3 text-c3",children:["We found ",(0,N.jsx)("b",{children:null===C||void 0===C?void 0:C.totalElements})," tours"]}),(0,N.jsx)(m.It,{cols:"3",spacing:"5",children:null===C||void 0===C||null===(e=C.data)||void 0===e?void 0:e.map((function(e,t){return(0,N.jsx)(w,{onClick:function(){return t=e.id,console.log(t),void H("/detail-page?beginningLocation=".concat((0,k.q)(V.beginningLocation),"&id=").concat(t));var t},booking:function(){return t=e.id,void H("/booking?id=".concat(t));var t},tourDetail:e.tourDetail},t)}))}),(0,N.jsx)("div",{className:"my-5 text-center",children:P>1&&(0,N.jsx)(l.tl,{currentPage:v,totalPages:P,onPageChange:function(e){b.Z.post("/tours/search?pageSize=6&pageNo=".concat(e-1),q).then((function(e){T(e.data)})),y(e)}})})]})]})]})]})}},9371:function(e,t){t.Z=function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(window.location.search)||[,""])[1].replaceAll("-"," "))||null}}}]);
//# sourceMappingURL=30.024d7439.chunk.js.map